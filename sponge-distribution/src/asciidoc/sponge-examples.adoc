= Sponge Examples

== Examples for all supported scripting languages

:exampleDisplayName: Actions
:exampleName: actions
include::sponge-example-script.adoc[]

:exampleDisplayName: Correlators
:exampleName: correlators
include::sponge-example-script.adoc[]

:exampleDisplayName: Correlators duration
:exampleName: correlators_duration
include::sponge-example-script.adoc[]

:exampleDisplayName: Events clone policy
:exampleName: events_clone_policy
include::sponge-example-script.adoc[]

These knowledge bases use a custom XML configuration. Note that `<knowledgeBase><file>` should correspond to the scripting language. Here is an example for Python.

.XML configuration events_clone_policy.xml for Python
[[events_clone_policy-xml-py]]
[source,xml]
----
include::{examplesDir}/script/py/events_clone_policy.xml[]
----

:exampleDisplayName: Cron
:exampleName: events_cron
include::sponge-example-script.adoc[]

:exampleDisplayName: Removing scheduled events
:exampleName: events_removing
include::sponge-example-script.adoc[]

:exampleDisplayName: Deduplication of events by filters
:exampleName: filters_deduplication
include::sponge-example-script.adoc[]

:exampleDisplayName: Java-based filters
:exampleName: filters_java
include::sponge-example-script.adoc[]

:exampleDisplayName: Filters
:exampleName: filters
include::sponge-example-script.adoc[]

:exampleDisplayName: Hello World example
:exampleName: hello_world
include::sponge-example-script.adoc[]

These knowledge bases use a custom XML configuration. Note that `<knowledgeBase><file>` should correspond to the scripting language. Here is an example for Python.

.XML configuration hello_world.xml for Python
[[hello_world-xml-py]]
[source,xml]
----
include::{examplesDir}/script/py/hello_world.xml[]
----

:exampleDisplayName: Knowledge base callbacks
:exampleName: knowledge_base_callbacks
include::sponge-example-script.adoc[]

:exampleDisplayName: Knowledge base loading
:exampleName: knowledge_base_load
include::sponge-example-script.adoc[]

:exampleDisplayName: Knowledge base manager
:exampleName: knowledge_base_manager
include::sponge-example-script.adoc[]

:exampleDisplayName: Library
:exampleName: library
include::sponge-example-script.adoc[]

These knowledge bases use a custom XML configuration. Note that `<knowledgeBase><file>` should correspond to the scripting language. Here is an example for Python.

.XML configuration library.xml for Python
[[library-xml-py]]
[source,xml]
----
include::{examplesDir}/script/py/library.xml[]
----

:exampleDisplayName: Java-based plugins
:exampleName: plugins_java
include::sponge-example-script.adoc[]

These knowledge bases use a custom XML configuration. Note that `<knowledgeBase><file>` should correspond to the scripting language. Here is an example for Python.

.XML configuration plugins_java.xml for Python
[[plugins_java-xml-py]]
[source,xml]
----
include::{examplesDir}/script/py/plugins_java.xml[]
----

:exampleDisplayName: Script-based plugins
:exampleName: plugins_script
include::sponge-example-script.adoc[]

These knowledge bases use a custom XML configuration. Note that `<knowledgeBase><file>` should correspond to the scripting language. Here is an example for Python.

.XML configuration plugins_script.xml for Python
[[plugins_script-xml-py]]
[source,xml]
----
include::{examplesDir}/script/py/plugins_script.xml[]
----

:exampleDisplayName: Rules and events
:exampleName: rules_events
include::sponge-example-script.adoc[]

These knowledge bases use a custom XML configuration. Note that `<knowledgeBase><file>` should correspond to the scripting language. Here is an example for Python.

.XML configuration rules_events.xml for Python
[[rules_events-xml-py]]
[source,xml]
----
include::{examplesDir}/script/py/rules_events.xml[]
----

:exampleDisplayName: Heartbeat example
:exampleName: rules_heartbeat
include::sponge-example-script.adoc[]

:exampleDisplayName: Rules with `none` event mode and conditions
:exampleName: rules_none_mode_events_conditions
include::sponge-example-script.adoc[]

:exampleDisplayName: Rules with `none` event mode
:exampleName: rules_none_mode_events
include::sponge-example-script.adoc[]

:exampleDisplayName: Rules
:exampleName: rules
include::sponge-example-script.adoc[]

:exampleDisplayName: Triggers
:exampleName: triggers
include::sponge-example-script.adoc[]

These knowledge bases use a custom XML configuration. Note that `<knowledgeBase><file>` should correspond to the scripting language. Here is an example for Python.

.XML configuration triggers.xml for Python
[[triggers-xml-py]]
[source,xml]
----
include::{examplesDir}/script/py/triggers.xml[]
----

== Examples for selected languages

=== Generating a chain of events, each carrying a Fibonacci number
.Python - fibonacci.py
[[fibonacci-py]]
[source,python]
----
include::{examplesDir}/core/fibonacci.py[]
----

=== Setting engine parameters
.XML configuration - engine_parameters.xml
[[engine_parameters-xml]]
[source,xml]
----
include::{examplesDir}/core/engine_parameters.xml[]
----

=== Integration with Spring framework
.Python - spring.py
[[spring-py]]
[source,python]
----
include::{examplesDir}/spring/spring.py[]
----

.Spring configuration and simple test - SpringTest.java
[[spring-java]]
[source,java]
----
include::{javaTestDir}/org/openksavi/sponge/examples/spring/SpringTest.java[]
----

=== Integration with Apache Camel - RSS
.Python - camel_rss.py
[[camel_rss-py]]
[source,python]
----
include::{examplesDir}/camel/camel_rss.py[]
----

.Camel configuration and simple test - CamelRssTest.java
[[camel_rss-java]]
[source,java]
----
include::{javaTestDir}/org/openksavi/sponge/examples/camel/CamelRssTest.java[]
----

=== Integration with Apache Camel - producer
.Python - camel_producer.py
[[camel_producer-py]]
[source,python]
----
include::{examplesDir}/camel/camel_producer.py[]
----

.Camel configuration and simple test - SimpleCamelProducerTest.java
[[camel_producer-java]]
[source,java]
----
include::{javaTestDir}/org/openksavi/sponge/examples/camel/SimpleCamelProducerTest.java[]
----

=== Integration with Apache Camel - consumer
.Python - camel_consumer.py
[[camel_consumer-py]]
[source,python]
----
include::{examplesDir}/camel/camel_consumer.py[]
----

.Camel configuration and simple test - SimpleCamelConsumerTest.java
[[camel_simple_consumer-java]]
[source,java]
----
include::{javaTestDir}/org/openksavi/sponge/examples/camel/SimpleCamelConsumerTest.java[]
----

=== Integration with Apache Camel - producer with an overridden action
.Python - camel_producer_overridden_action.py
[[camel_producer_overridden_action-py]]
[source,python]
----
include::{examplesDir}/camel/camel_producer_overridden_action.py[]
----

.Camel configuration and simple test - CamelProducerCustomActionTest.java
[[camel_producer_overridden_action-java]]
[source,java]
----
include::{javaTestDir}/org/openksavi/sponge/examples/camel/CamelProducerOverriddenActionTest.java[]
----

=== Integration with Apache Camel - producer with custom action
.Python - camel_producer_custom_action.py
[[camel_producer_custom_action-py]]
[source,python]
----
include::{examplesDir}/camel/camel_producer_custom_action.py[]
----

.Camel configuration and simple test - CamelProducerCustomActionTest.java
[[camel_producer_custom_action-java]]
[source,java]
----
include::{javaTestDir}/org/openksavi/sponge/examples/camel/CamelProducerCustomActionTest.java[]
----

=== Integration with Apache Camel - sending Camel messages to many endpoints
.Python - camel_multiple_consumer.py
[[camel_multiple_consumer-py]]
[source,python]
----
include::{examplesDir}/camel/camel_multiple_consumer.py[]
----

.Camel configuration and simple test - CamelMultipleConsumerTest.java
[[camel_multiple_consumer-java]]
[source,java]
----
include::{javaTestDir}/org/openksavi/sponge/examples/camel/CamelMultipleConsumerTest.java[]
----
